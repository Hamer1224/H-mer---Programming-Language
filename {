[?2004h[?1049h[22;0;0t[1;38r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[36;121H(B[0;7m[ Reading... ](B[m[36;119H(B[0;7m[ Read 194 lines ](B[m[36;119H   (B[0;7m[ New File ](B[m[K[36;121H(B[0;7m[ Reading... ](B[m[36;120H(B[0;7m[ Read 1 line ](B[m[36;120H  (B[0;7m[ New File ](B[m[K[36;113H(B[0;7m[ generator.rs -- 194 lines ](B[m[H(B[0;7m  [1/7]                                                                                                              src/generator.rs                                                                                                                         [1;253H(B[m[37d(B[0;7m^G(B[m Help[37;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[37;73H(B[0;7m^T(B[m Execute[37;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[37;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[37;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[37;235H(B[0;7m^P(B[m Prev Line[38d(B[0;7m^X(B[m Close[38;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[38;55H(B[0;7m^U(B[m Paste[38;73H(B[0;7m^J(B[m Justify[38;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[38;127H(B[0;7mM-6(B[m Copy[38;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[38;181H(B[0;7mâ–¸(B[m Forward[38;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[38;235H(B[0;7m^N(B[m Next Line[2d[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[3d[33muse[39m(B[m [33mcrate[39m(B[m::lexer::[35mToken[39m(B[m;[4d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[6d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[7;5H[33mpub[39m(B[m output: [35mString[39m(B[m,[8;5Hsymbols: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[9;5Hclass_map: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mVec[39m(B[m<[35mString[39m(B[m>>,[10;5Hobj_types: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[11;5Hreg_count: usize,[12;5Hlabel_count: usize,[13d}[15d[33mimpl[39m(B[m [35mGenerator[39m(B[m {[16;5H[33mpub[39m(B[m [33mfn[35m new[39m(B[m() -> [35mSelf[39m(B[m {[17;9H[35mSelf[39m(B[m {[18doutput: [32m".global _start\n.section .text\n\n_start:\n    mov x11, #10\n    mov x0, #0\n    mov x1, #4096\n    mov x2, #3\n    mov x3, #34\n    mov x4, #-1\n    mov x5, #0\n    mov x8, #222\n    svc #0\n    mov x20, x0\n"[39m(B[m.to_string(),[19;13Hsymbols: [35mHashMap[39m(B[m::new(),[20;13Hclass_map: [35mHashMap[39m(B[m::new(),[21;13Hobj_types: [35mHashMap[39m(B[m::new(),[22;13Hreg_count: 12,[23;13Hlabel_count: 0,[24;9H}[25;5H}[27d[33mfn[35m get_path_info[39m(B[m(&[33mself[39m(B[m, path: &[35mVec[39m(B[m<[35mString[39m(B[m>) -> ([35mString[39m(B[m, usize) {[28;9H[33mif[39m(B[m path.is_empty() { [33mreturn[39m(B[m ([32m"x0"[39m(B[m.into(), 0); }[29;9H[33mlet[39m(B[m base_var = &path[0];[30;9H[33mlet[39m(B[m reg = [33mself[39m(B[m.symbols.get(base_var).expect(&[31mformat![39m(B[m([32m"Var {} not found"[39m(B[m, base_var)).clone();[31;9H[33mlet[39m(B[m [33mmut[39m(B[m offset = 0;[32;9H[33mif[39m(B[m path.len() > 1 {[33;13H[33mlet[39m(B[m c_type = [33mself[39m(B[m.obj_types.get(base_var).expect([32m"Type missing"[39m(B[m);[34;13H[33mlet[39m(B[m fields = [33mself[39m(B[m.class_map.get(c_type).expect([32m"Class missing"[39m(B[m);[35;13Hoffset = fields.iter().position(|f| f == &path[1]).unwrap() * 8;[2d[?12l[?25h[?25l[1;245H(B[0;7mModified[36d(B[m[K[1;253H[2d[K[3;16H[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"\n    [34m// Hardened Prob-Roll: {}%\n", chance));[4;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    ldr x1, [{}, #8]\n"[39m(B[m, math_reg));[6;16H[1K [34m// --- Emergency Entropy Check ---[7;16H[39m(B[m[1K [34m// If seed is 0, kernel failed or it's first run. Inject a constant.[8;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #0\n"[39m(B[m));[9;16H[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ne .Lnotzero{}\n"[39m(B[m, id));[10;16H[1K [33mself[39m(B[m.output.push_str([32m"    mov x1, #0xACE1\n"[39m(B[m); [34m// Starting constant[11;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lnotzero{}:\n"[39m(B[m, id));[12d[K[13;16H[1K [34m// --- Improved Scrambler (LCG + XOR) ---[14;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #48271\n"[39m(B[m);   [34m// Mersch-Twister constant[15;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str([32m"    mul x1, x1, x2\n"[39m(B[m);[16;16H[1K [33mself[39m(B[m.output.push_str([32m"    add x1, x1, #11\n"[39m(B[m);[17;16H[1K [33mself[39m(B[m.output.push_str([32m"    lsl x2, x1, #13\n"[39m(B[m);[18;13H    [33mself[39m(B[m.output.push_str([32m"    eor x1, x1, x2\n"[39m(B[m);[K[19d[K[20;13H    [34m// Save the evolved state back to memory[21;13H[39m(B[m    [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    str x1, [{}, #8]\n"[39m(B[m, math_reg));[22d[K[23;13H    [34m// --- Unsigned Modulo 100 ---[24;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str([32m"    mov x2, #100\n"[39m(B[m);[25;16H[1K [33mself[39m(B[m.output.push_str([32m"    udiv x3, x1, x2\n"[39m(B[m);[26;17H[33mself[39m(B[m.output.push_str([32m"    msub x1, x3, x2, x1\n"[39m(B[m); [34m// x1 = seed % 100[27d[39m(B[m[K[28;16H[1K [34m// --- The "Luck" Comparison ---[39m(B[m[K[29;16H[1K [34m// If roll (x1) >= chance, SKIP the body.[30;16H[39m(B[m[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #{}\n"[39m(B[m, chance [33mas[39m(B[m i64));[K[31;16H[1K [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ge .Lif{}\n"[39m(B[m, id));[32d[K[33;13H    [33mfor[39m(B[m s [33min[39m(B[m body { [33mself[39m(B[m.gen_stmt(s); }[K[34;13H    [33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lif{}:\n"[39m(B[m, id));[K[35d[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[K[?12l[?25h[35;12H[1K }[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[35;14H[?25l[?12l[?25h7[2;36r8[36d
[1;38r[35;1H[33muse[39m(B[m [33mcrate[39m(B[m::lexer::[35mToken[39m(B[m;[35;14H[?25l[36;115H(B[0;1m[37m[41m[ To suspend, type ^T^Z ][39;49m(B[m[?12l[?25h[35;14H[?25l[36;96H(B[0;7m[ line  40/233 (17%), col 14/25 ( 56%), char  2162/11621 (18%) ](B[m[?12l[?25h[35;14H[?25l[36;160H[?12l[?25h[35;14H[?25l[?12l[?25h[1P[?25l7[2;35r8
[1;38r[34;13H[K[35dxer::[35mToken[39m(B[m;[?12l[?25h[?25l[36d(B[0;7mSave modified buffer?                                                                                                                                                                                                                                         [37;1H Y(B[m Yes[K[38d(B[0;7m N(B[m No   [38;17H(B[0;7m^C(B[m Cancel[K[36;23H[?12l[?25h[?25l[?12l[?25h[?25l[36;120H[1K (B[0;7m[ Cancelled ](B[m[K[37d(B[0;7m^G(B[m Help[37;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[37;73H(B[0;7m^T(B[m Execute[37;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[37;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[37;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[37;235H(B[0;7m^P(B[m Prev Line[38d(B[0;7m^X(B[m Close[38;17H  (B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[38;55H(B[0;7m^U(B[m Paste[38;73H(B[0;7m^J(B[m Justify[38;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[38;127H(B[0;7mM-6(B[m Copy[38;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[38;181H(B[0;7mâ–¸(B[m Forward[38;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[38;235H(B[0;7m^N(B[m Next Line[?12l[?25h[35d[?25l[36;96H(B[0;7m[ line  41/234 (17%), col  1/12 (  8%), char  2162/11621 (18%) ](B[m[?12l[?25h[A[?25l[36;160H[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[34d[?25l[?12l[?25h[35d[38;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;64r[?12l[?25h[39;49m]104(B[m[4l[?7h[H[2J[?2004h[?1h=[?1h=(B[0;7m  [1/7]                                                                                                              src/generator.rs                                                                                                               Modified  [1;253H(B[m[2;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    ldr x1, [{}, #8]\n"[39m(B[m, math_reg));[4;17H[34m// --- Emergency Entropy Check ---[5;17H// If seed is 0, kernel failed or it's first run. Inject a constant.[6;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #0\n"[39m(B[m));[7;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ne .Lnotzero{}\n"[39m(B[m, id));[8;17H[33mself[39m(B[m.output.push_str([32m"    mov x1, #0xACE1\n"[39m(B[m); [34m// Starting constant[9;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lnotzero{}:\n"[39m(B[m, id));[11;17H[34m// --- Improved Scrambler (LCG + XOR) ---[12;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #48271\n"[39m(B[m);   [34m// Mersch-Twister constant[13;17H[33mself[39m(B[m.output.push_str([32m"    mul x1, x1, x2\n"[39m(B[m);[14;17H[33mself[39m(B[m.output.push_str([32m"    add x1, x1, #11\n"[39m(B[m);[15;17H[33mself[39m(B[m.output.push_str([32m"    lsl x2, x1, #13\n"[39m(B[m);[16;17H[33mself[39m(B[m.output.push_str([32m"    eor x1, x1, x2\n"[39m(B[m);[18;17H[34m// Save the evolved state back to memory[19;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    str x1, [{}, #8]\n"[39m(B[m, math_reg));[21;17H[34m// --- Unsigned Modulo 100 ---[22;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #100\n"[39m(B[m);[23;17H[33mself[39m(B[m.output.push_str([32m"    udiv x3, x1, x2\n"[39m(B[m);[24;17H[33mself[39m(B[m.output.push_str([32m"    msub x1, x3, x2, x1\n"[39m(B[m); [34m// x1 = seed % 100[26;17H// --- The "Luck" Comparison ---[27;17H// If roll (x1) >= chance, SKIP the body.[28;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #{}\n"[39m(B[m, chance [33mas[39m(B[m i64));[29;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ge .Lif{}\n"[39m(B[m, id));[31;17H[33mfor[39m(B[m s [33min[39m(B[m body { [33mself[39m(B[m.gen_stmt(s); }[32;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lif{}:\n"[39m(B[m, id));[33;13H}[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[34d[33muse[39m(B[m [33mcrate[39m(B[m::l[35dxer::[35mToken[39m(B[m;[36d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[38d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[39;5H[33mpub[39m(B[m output: [35mString[39m(B[m,[40;5Hsymbols: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[41;5Hclass_map: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mVec[39m(B[m<[35mString[39m(B[m>>,[42;5Hobj_types: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[43;5Hreg_count: usize,[44;5Hlabel_count: usize,[45d}[47d[33mimpl[39m(B[m [35mGenerator[39m(B[m {[48;5H[33mpub[39m(B[m [33mfn[35m new[39m(B[m() -> [35mSelf[39m(B[m {[49;9H[35mSelf[39m(B[m {[50doutput: [32m".global _start\n.section .text\n\n_start:\n    mov x11, #10\n    mov x0, #0\n    mov x1, #4096\n    mov x2, #3\n    mov x3, #34\n    mov x4, #-1\n    mov x5, #0\n    mov x8, #222\n    svc #0\n    mov x20, x0\n"[39m(B[m.to_string(),[51;13Hsymbols: [35mHashMap[39m(B[m::new(),[52;13Hclass_map: [35mHashMap[39m(B[m::new(),[53;13Hobj_types: [35mHashMap[39m(B[m::new(),[54;13Hreg_count: 12,[55;13Hlabel_count: 0,[56;9H}[57;5H}[59d[33mfn[35m get_path_info[39m(B[m(&[33mself[39m(B[m, path: &[35mVec[39m(B[m<[35mString[39m(B[m>) -> ([35mString[39m(B[m, usize) {[60;9H[33mif[39m(B[m path.is_empty() { [33mreturn[39m(B[m ([32m"x0"[39m(B[m.into(), 0); }[61;9H[33mlet[39m(B[m base_var = &path[0];[63d(B[0;7m^G(B[m Help[63;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[63;73H(B[0;7m^T(B[m Execute[63;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[63;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[63;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[63;235H(B[0;7m^P(B[m Prev Line[64d(B[0;7m^X(B[m Close[64;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[64;55H(B[0;7m^U(B[m Paste[64;73H(B[0;7m^J(B[m Justify[64;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[64;127H(B[0;7mM-6(B[m Copy[64;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[64;181H(B[0;7mâ–¸(B[m Forward[64;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[64;235H(B[0;7m^N(B[m Next Line[?25l[?12l[?25h[35d[?25l[?12l[?25h[64;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;38r[?12l[?25h[39;49m]104(B[m[4l[?7h[H[2J(B[0;7m  [1/7]                                                                                                              src/generator.rs                                                                                                               Modified  [2;17H(B[0m[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    ldr x1, [{}, #8]\n"[39m(B[m, math_reg));[4;17H[34m// --- Emergency Entropy Check ---[5;17H// If seed is 0, kernel failed or it's first run. Inject a constant.[6;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #0\n"[39m(B[m));[7;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ne .Lnotzero{}\n"[39m(B[m, id));[8;17H[33mself[39m(B[m.output.push_str([32m"    mov x1, #0xACE1\n"[39m(B[m); [34m// Starting constant[9;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lnotzero{}:\n"[39m(B[m, id));[11;17H[34m// --- Improved Scrambler (LCG + XOR) ---[12;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #48271\n"[39m(B[m);   [34m// Mersch-Twister constant[13;17H[33mself[39m(B[m.output.push_str([32m"    mul x1, x1, x2\n"[39m(B[m);[14;17H[33mself[39m(B[m.output.push_str([32m"    add x1, x1, #11\n"[39m(B[m);[15;17H[33mself[39m(B[m.output.push_str([32m"    lsl x2, x1, #13\n"[39m(B[m);[16;17H[33mself[39m(B[m.output.push_str([32m"    eor x1, x1, x2\n"[39m(B[m);[18;17H[34m// Save the evolved state back to memory[19;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    str x1, [{}, #8]\n"[39m(B[m, math_reg));[21;17H[34m// --- Unsigned Modulo 100 ---[22;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #100\n"[39m(B[m);[23;17H[33mself[39m(B[m.output.push_str([32m"    udiv x3, x1, x2\n"[39m(B[m);[24;17H[33mself[39m(B[m.output.push_str([32m"    msub x1, x3, x2, x1\n"[39m(B[m); [34m// x1 = seed % 100[26;17H// --- The "Luck" Comparison ---[27;17H// If roll (x1) >= chance, SKIP the body.[28;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #{}\n"[39m(B[m, chance [33mas[39m(B[m i64));[29;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ge .Lif{}\n"[39m(B[m, id));[31;17H[33mfor[39m(B[m s [33min[39m(B[m body { [33mself[39m(B[m.gen_stmt(s); }[32;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lif{}:\n"[39m(B[m, id));[33;13H}[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[34d[33muse[39m(B[m [33mcrate[39m(B[m::l[35dxer::[35mToken[39m(B[m;[36d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[38d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[H[?2004h[?1h=[?1h=[36d[J[1;253H[37d(B[0;7m^G(B[m Help[37;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[37;73H(B[0;7m^T(B[m Execute[37;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[37;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[37;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[37;235H(B[0;7m^P(B[m Prev Line[38d(B[0;7m^X(B[m Close[38;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[38;55H(B[0;7m^U(B[m Paste[38;73H(B[0;7m^J(B[m Justify[38;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[38;127H(B[0;7mM-6(B[m Copy[38;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[38;181H(B[0;7mâ–¸(B[m Forward[38;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[38;235H(B[0;7m^N(B[m Next Line[?25l[?12l[?25h[35d[?25l[?12l[?25h[38;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;64r[?12l[?25h[39;49m]104(B[m[4l[?7h[H[2J(B[0;7m  [1/7]                                                                                                              src/generator.rs                                                                                                               Modified  [2;17H(B[0m[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    ldr x1, [{}, #8]\n"[39m(B[m, math_reg));[4;17H[34m// --- Emergency Entropy Check ---[5;17H// If seed is 0, kernel failed or it's first run. Inject a constant.[6;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #0\n"[39m(B[m));[7;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ne .Lnotzero{}\n"[39m(B[m, id));[8;17H[33mself[39m(B[m.output.push_str([32m"    mov x1, #0xACE1\n"[39m(B[m); [34m// Starting constant[9;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lnotzero{}:\n"[39m(B[m, id));[11;17H[34m// --- Improved Scrambler (LCG + XOR) ---[12;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #48271\n"[39m(B[m);   [34m// Mersch-Twister constant[13;17H[33mself[39m(B[m.output.push_str([32m"    mul x1, x1, x2\n"[39m(B[m);[14;17H[33mself[39m(B[m.output.push_str([32m"    add x1, x1, #11\n"[39m(B[m);[15;17H[33mself[39m(B[m.output.push_str([32m"    lsl x2, x1, #13\n"[39m(B[m);[16;17H[33mself[39m(B[m.output.push_str([32m"    eor x1, x1, x2\n"[39m(B[m);[18;17H[34m// Save the evolved state back to memory[19;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    str x1, [{}, #8]\n"[39m(B[m, math_reg));[21;17H[34m// --- Unsigned Modulo 100 ---[22;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #100\n"[39m(B[m);[23;17H[33mself[39m(B[m.output.push_str([32m"    udiv x3, x1, x2\n"[39m(B[m);[24;17H[33mself[39m(B[m.output.push_str([32m"    msub x1, x3, x2, x1\n"[39m(B[m); [34m// x1 = seed % 100[26;17H// --- The "Luck" Comparison ---[27;17H// If roll (x1) >= chance, SKIP the body.[28;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #{}\n"[39m(B[m, chance [33mas[39m(B[m i64));[29;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ge .Lif{}\n"[39m(B[m, id));[31;17H[33mfor[39m(B[m s [33min[39m(B[m body { [33mself[39m(B[m.gen_stmt(s); }[32;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lif{}:\n"[39m(B[m, id));[33;13H}[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[34d[33muse[39m(B[m [33mcrate[39m(B[m::l[35dxer::[35mToken[39m(B[m;[37d(B[0;7m^G(B[m Help[37;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[37;73H(B[0;7m^T(B[m Execute[37;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[37;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[37;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[37;235H(B[0;7m^P(B[m Prev Line[38d(B[0;7m^X(B[m Close[38;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[38;55H(B[0;7m^U(B[m Paste[38;73H(B[0;7m^J(B[m Justify[38;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[38;127H(B[0;7mM-6(B[m Copy[38;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[38;181H(B[0;7mâ–¸(B[m Forward[38;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[38;235H(B[0;7m^N(B[m Next Line[H[?2004h[?1h=[?1h=[253G[36d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[37d[K[38d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[K[39;5H[33mpub[39m(B[m output: [35mString[39m(B[m,[40;5Hsymbols: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[41;5Hclass_map: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mVec[39m(B[m<[35mString[39m(B[m>>,[42;5Hobj_types: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[43;5Hreg_count: usize,[44;5Hlabel_count: usize,[45d}[47d[33mimpl[39m(B[m [35mGenerator[39m(B[m {[48;5H[33mpub[39m(B[m [33mfn[35m new[39m(B[m() -> [35mSelf[39m(B[m {[49;9H[35mSelf[39m(B[m {[50doutput: [32m".global _start\n.section .text\n\n_start:\n    mov x11, #10\n    mov x0, #0\n    mov x1, #4096\n    mov x2, #3\n    mov x3, #34\n    mov x4, #-1\n    mov x5, #0\n    mov x8, #222\n    svc #0\n    mov x20, x0\n"[39m(B[m.to_string(),[51;13Hsymbols: [35mHashMap[39m(B[m::new(),[52;13Hclass_map: [35mHashMap[39m(B[m::new(),[53;13Hobj_types: [35mHashMap[39m(B[m::new(),[54;13Hreg_count: 12,[55;13Hlabel_count: 0,[56;9H}[57;5H}[59d[33mfn[35m get_path_info[39m(B[m(&[33mself[39m(B[m, path: &[35mVec[39m(B[m<[35mString[39m(B[m>) -> ([35mString[39m(B[m, usize) {[60;9H[33mif[39m(B[m path.is_empty() { [33mreturn[39m(B[m ([32m"x0"[39m(B[m.into(), 0); }[61;9H[33mlet[39m(B[m base_var = &path[0];[63d(B[0;7m^G(B[m Help[63;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[63;73H(B[0;7m^T(B[m Execute[63;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[63;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[63;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[63;235H(B[0;7m^P(B[m Prev Line[64d(B[0;7m^X(B[m Close[64;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[64;55H(B[0;7m^U(B[m Paste[64;73H(B[0;7m^J(B[m Justify[64;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[64;127H(B[0;7mM-6(B[m Copy[64;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[64;181H(B[0;7mâ–¸(B[m Forward[64;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[64;235H(B[0;7m^N(B[m Next Line[?25l[?12l[?25h[35d[?25l[?12l[?25h[64;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;38r[?12l[?25h[39;49m]104(B[m[4l[?7h[H[2J(B[0;7m  [1/7]                                                                                                              src/generator.rs                                                                                                               Modified  [2;17H(B[0m[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    ldr x1, [{}, #8]\n"[39m(B[m, math_reg));[4;17H[34m// --- Emergency Entropy Check ---[5;17H// If seed is 0, kernel failed or it's first run. Inject a constant.[6;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #0\n"[39m(B[m));[7;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ne .Lnotzero{}\n"[39m(B[m, id));[8;17H[33mself[39m(B[m.output.push_str([32m"    mov x1, #0xACE1\n"[39m(B[m); [34m// Starting constant[9;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lnotzero{}:\n"[39m(B[m, id));[11;17H[34m// --- Improved Scrambler (LCG + XOR) ---[12;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #48271\n"[39m(B[m);   [34m// Mersch-Twister constant[13;17H[33mself[39m(B[m.output.push_str([32m"    mul x1, x1, x2\n"[39m(B[m);[14;17H[33mself[39m(B[m.output.push_str([32m"    add x1, x1, #11\n"[39m(B[m);[15;17H[33mself[39m(B[m.output.push_str([32m"    lsl x2, x1, #13\n"[39m(B[m);[16;17H[33mself[39m(B[m.output.push_str([32m"    eor x1, x1, x2\n"[39m(B[m);[18;17H[34m// Save the evolved state back to memory[19;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    str x1, [{}, #8]\n"[39m(B[m, math_reg));[21;17H[34m// --- Unsigned Modulo 100 ---[22;17H[33mself[39m(B[m.output.push_str([32m"    mov x2, #100\n"[39m(B[m);[23;17H[33mself[39m(B[m.output.push_str([32m"    udiv x3, x1, x2\n"[39m(B[m);[24;17H[33mself[39m(B[m.output.push_str([32m"    msub x1, x3, x2, x1\n"[39m(B[m); [34m// x1 = seed % 100[26;17H// --- The "Luck" Comparison ---[27;17H// If roll (x1) >= chance, SKIP the body.[28;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    cmp x1, #{}\n"[39m(B[m, chance [33mas[39m(B[m i64));[29;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m"    b.ge .Lif{}\n"[39m(B[m, id));[31;17H[33mfor[39m(B[m s [33min[39m(B[m body { [33mself[39m(B[m.gen_stmt(s); }[32;17H[33mself[39m(B[m.output.push_str(&[31mformat![39m(B[m([32m".Lif{}:\n"[39m(B[m, id));[33;13H}[33muse[39m(B[m std::collections::[35mHashMap[39m(B[m;[34d[33muse[39m(B[m [33mcrate[39m(B[m::l[35dxer::[35mToken[39m(B[m;[36d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[38d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[H[?2004h[?1h=[?1h=[36d[J[1;253H[37d(B[0;7m^G(B[m Help[37;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^F(B[m Where Is[55G(B[0;7m^K(B[m Cut[37;73H(B[0;7m^T(B[m Execute[37;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[37;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-B(B[m Previous[181G(B[0;7mâ—‚(B[m Back[37;199H(B[0;7m^â—‚(B[m Prev Word[217G(B[0;7m^A(B[m Home[37;235H(B[0;7m^P(B[m Prev Line[38d(B[0;7m^X(B[m Close[38;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[38;55H(B[0;7m^U(B[m Paste[38;73H(B[0;7m^J(B[m Justify[38;91H(B[0;7m^/(B[m Go To Line     (B[0;7mM-E(B[m Redo[38;127H(B[0;7mM-6(B[m Copy[38;145H(B[0;7m^B(B[m Where Was[163G(B[0;7mM-F(B[m Next[38;181H(B[0;7mâ–¸(B[m Forward[38;199H(B[0;7m^â–¸(B[m Next Word[217G(B[0;7m^E(B[m End[38;235H(B[0;7m^N(B[m Next Line[?25l[?12l[?25h[35d[?25l[?12l[?25h[?25l[2d[33muse[39m(B[m [33mcrate[39m(B[m::l[K[3dxer::[35mToken[39m(B[m;[4d[33muse[39m(B[m [33mcrate[39m(B[m::parser::[35mStmt[39m(B[m;[K[5d[K[6d[33mpub[39m(B[m [33mstruct[39m(B[m [35mGenerator[39m(B[m {[K[7;5H[33mpub[39m(B[m output: [35mString[39m(B[m,[K[8;5Hsymbols: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[K[9;5Hclass_map: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mVec[39m(B[m<[35mString[39m(B[m>>,[K[10;5Hobj_types: [35mHashMap[39m(B[m<[35mString[39m(B[m, [35mString[39m(B[m>,[11;5Hreg_count: usize,[K[12;5Hlabel_count: usize,[K[13d}[K[14d[K[15d[33mimpl[39m(B[m [35mGenerator[39m(B[m {[K[16;5H[33mpub[39m(B[m [33mfn[35m new[39m(B[m() -> [35mSelf[39m(B[m {[K[17;9H[35mSelf[39m(B[m {[18doutput: [32m".global _start\n.section .text\n\n_start:\n    mov x11, #10\n    mov x0, #0\n    mov x1, #4096\n    mov x2, #3\n    mov x3, #34\n    mov x4, #-1\n    mov x5, #0\n    mov x8, #222\n    svc #0\n    mov x20, x0\n"[39m(B[m.to_string(),[19;13Hsymbols: [35mHashMap[39m(B[m::new(),[K[20;13Hclass_map: [35mHashMap[39m(B[m::new(),[21;13Hobj_types: [35mHashMap[39m(B[m::new(),[K[22;13Hreg_count: 12,[K[23;13Hlabel_count: 0,[K[24;9H}[K[25;5H}[26d[K[27;5H[33mfn[35m get_path_info[39m(B[m(&[33mself[39m(B[m, path: &[35mVec[39m(B[m<[35mString[39m(B[m>) -> ([35mString[39m(B[m, usize) {[28;9H[33mif[39m(B[m path.is_empty() { [33mreturn[39m(B[m ([32m"x0"[39m(B[m.into(), 0); }[K[29;9H[33mlet[39m(B[m base_var = &path[0];[K[30;9H[33mlet[39m(B[m reg = [33mself[39m(B[m.symbols.get(base_var).expect(&[31mformat![39m(B[m([32m"Var {} not found"[39m(B[m, base_var)).clone();[31;9H[33mlet[39m(B[m [33mmut[39m(B[m offset = 0;[K[32;9H[33mif[39m(B[m path.len() > 1 {[K[33;13H[33mlet[39m(B[m c_type = [33mself[39m(B[m.obj_types.get(base_var).expect([32m"Type missing"[39m(B[m);[34;12H[1K [33mlet[39m(B[m fields = [33mself[39m(B[m.class_map.get(c_type).expect([32m"Class missing"[39m(B[m);[35;12H[1K offset = fields.iter().position(|f| f == &path[1]).unwrap() * 8;[?12l[?25h[?25l[?12l[?25h[35;77H[?25l[36;96H(B[0;7m[ line  73/234 (31%), col 77/77 (100%), char  3456/11621 (29%) ](B[m[?12l[?25h[35;77H